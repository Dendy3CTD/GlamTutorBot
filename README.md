# GlamTutorBot

Telegram-бот для продажи косметики с каталогом товаров, оформлением заказов, настройками аккаунта и админ-панелью.

---

## Возможности

### Для пользователей
- **Главное меню** — четыре раздела: Начать, Настройки аккаунта, Прошлые заказы, Обратная связь.
- **Каталог** — лента товаров с фото, ценой и артикулом; навигация кнопками «Назад» / «Вперёд», счётчик (N/M). Под каждым товаром: «Заказать» и «Написать продавцу».
- **Оформление заказа** — пошагово: выбор товара → имя → телефон → адрес. Заказ сохраняется в «Прошлые заказы».
- **Настройки аккаунта** — контакты, адрес, режим работы, выбор города, карты, онлайн-чеки, статистика (заглушка), пол, псевдоним, комментарии. Данные сохраняются.
- **Прошлые заказы** — список последних 10 завершённых заказов.
- **Обратная связь** — написать продавцу (ссылка в Telegram) или оставить сообщение в боте; на сообщения можно ответить из админки.

### Для администратора
- **Команда `/admin`** — доступ только для пользователей из списка `ADMIN_IDS`.
- **Добавить товар** — пошаговый ввод: название → цена → описание → фото (URL, «пропустить» или отправить фото файлом). Товару присваивается новый артикул и он появляется в каталоге.
- **Обратная связь (ответы)** — список последних 20 сообщений от пользователей; выбор получателя и отправка ответа в чат пользователю.

---

## Установка

1. **Python 3.7+**  
   Установите с [python.org](https://www.python.org/downloads/), при установке отметьте «Add Python to PATH».

2. **Зависимости**
   ```bash
   pip install -r requirements.txt
   ```

3. **Токен бота**  
   Создайте бота в [@BotFather](https://t.me/BotFather), скопируйте токен. В `main.py` задан токен по умолчанию; для продакшена лучше использовать переменную окружения:
   ```bash
   set GLAMTUTOR_BOT_TOKEN=ваш_токен
   ```

4. **Админы**  
   Узнайте свой Telegram ID (например, у [@userinfobot](https://t.me/userinfobot)). В `main.py` в начале файла задайте:
   ```python
   ADMIN_IDS = [1290112937]  # ваш ID или несколько через запятую
   ```
   Либо переменная окружения: `ADMIN_IDS=123456789` или `ADMIN_IDS=111,222`.

---

## Запуск

- **Командная строка (в папке проекта):**
  ```bash
  python main.py
  ```
- **Windows:** двойной клик по `start_bot.bat` или запуск `run.ps1` (PowerShell).  
  Если команда `python` не найдена, см. `ЗАПУСК_WINDOWS.md` и `УСТАНОВКА_PYTHON.md`.

После запуска в консоли должно появиться: `Бот запущен: @GlamTutorBot (id=...)`. Окно не закрывайте.

---

## Структура проекта

| Файл / папка | Назначение |
|--------------|------------|
| `main.py` | Весь код бота: обработчики, каталог, заказы, настройки, админка |
| `requirements.txt` | Зависимости (pyTelegramBotAPI) |
| `start_bot.bat` | Запуск бота в Windows |
| `run.ps1` | Поиск Python и запуск бота (PowerShell) |
| `README.md` | Документация (этот файл) |
| `ЗАПУСК_WINDOWS.md` | Что делать, если при запуске выводится только «Python» |
| `УСТАНОВКА_PYTHON.md` | Установка Python на Windows |
| `ИНСТРУКЦИЯ_ЗАПУСКА.md` | Пошаговый запуск и проверка в Telegram |
| `ПЕРЕЗАПУСК_БОТА.txt` | Как перезапустить бота после изменений кода |

---

## Настройка данных в коде

В `main.py` в начале файла можно изменить:

- **Контакты и адрес:** `seller_contact`, `seller_phone`, `seller_address`, `seller_work_hours`, `seller_map_link`
- **Города для выбора:** список `CITIES`
- **Токен:** переменная `BOT_TOKEN` или env `GLAMTUTOR_BOT_TOKEN`
- **Админы:** список `ADMIN_IDS` или env `ADMIN_IDS`

Товары хранятся в словаре `products` (артикул → название, цена, описание, фото). Новые товары добавляются через админку или вручную в коде.

---

## Использование (пользователь)

1. Найти бота в Telegram и нажать **Start** или отправить `/start`.
2. Появится приветствие и кнопки: **Каталог**, **Контакты**, **Настройки**, а также нижнее меню: **Начать**, **Настройки аккаунта**, **Прошлые заказы**, **Обратная связь**.
3. **Начать** — снова приветствие и быстрые кнопки (Каталог, Контакты, Настройки).
4. В каталоге листать товары кнопками «Назад» / «Вперёд», при необходимости нажать «Заказать» и пройти шаги.
5. В настройках — контакты, адрес, город, карты, пол, псевдоним и т.д.
6. В обратной связи — написать продавцу или оставить сообщение в боте.

---

## Админ-панель

1. Отправить боту команду **`/admin`** (доступ только при наличии вашего ID в `ADMIN_IDS`).
2. **Добавить товар** — ввести по шагам название, цену, описание, затем URL фото, слово «пропустить» или отправить фото файлом.
3. **Обратная связь (ответы)** — открыть список сообщений, выбрать пункт, ввести текст ответа в чат — он придёт пользователю от имени поддержки.
4. **Выход из админки** — кнопка «Выход из админки».

---

## История версий

| Версия | Коммит | Описание |
|--------|--------|----------|
| **v0.1.0** | `8c7d69f` | First commit — начальная версия проекта |
| **v0.2.0** | `44298b3` | Create README.md — добавлена документация |
| **v0.3.0** | `cb78d92` | Каталог товаров с ценами и артикулами, выбор товара и связь с продавцом (inline-кнопки, callback) |
| **v0.4.0** | `646692f` | Улучшения бота: логирование, проверка токена, /help, обработка ошибок; запуск на Windows (run.ps1, start_bot.bat, requirements.txt); документация |
| **v0.5.0** | `860c767` | Реструктуризация: каталог-лента с фото; меню Каталог, Заказать, Настройки; пошаговый заказ |
| **v0.6.0** | `dd393eb` | Инструкция ПЕРЕЗАПУСК_БОТА.txt |
| **v0.7.0** | `b404586` | Навигация по каталогу (Назад/Вперёд). Настройки: Контакты, Адрес, Режим работы и др. |
| **v0.8.0** | `1903989` | Меню: Начать, Настройки аккаунта, Прошлые заказы, Обратная связь. Настройки: город, карты, чеки, статистика, пол, псевдоним, комментарии. Админ-панель: добавление товаров, ответы на обратную связь. |

---

## Лицензия и контакты

Проект можно использовать и дорабатывать под себя. По вопросам — контакты в описании репозитория или в боте (раздел «Настройки» → «Контакты»).
